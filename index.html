<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Firebase 연결 테스트</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-analytics-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
</head>
<body>
  <h1>Firebase 연결 테스트</h1>
  <pre id="status">초기화 중...</pre>

  <script>
    // 사용자가 제공한 apiKey 그대로 넣은 firebaseConfig
    const firebaseConfig = {
      apiKey: "AIzaSyDz6xGJNKXinG5rREjdrPz7toIYGZXzilU",
      authDomain: "sarangbangmusicplaylist.firebaseapp.com",
      projectId: "sarangbangmusicplaylist",
      storageBucket: "sarangbangmusicplaylist.appspot.com",
      messagingSenderId: "193412502606",
      appId: "1:193412502606:web:0f7f9ddbef1ee6711d1ff",
      measurementId: "G-L14GH3BHYD"
    };

    // Firebase 초기화
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    const statusEl = document.getElementById('status');

    // 익명 로그인 시도
    firebase.auth().signInAnonymously()
      .then(() => {
        statusEl.textContent = "✅ Firebase 초기화 + 익명 로그인 성공";
        // Firestore 테스트
        return firebase.firestore().collection("test").doc("ping").set({ time: Date.now() });
      })
      .then(() => {
        statusEl.textContent += "\n✅ Firestore 쓰기 성공";
        return firebase.firestore().collection("test").doc("ping").get();
      })
      .then(doc => {
        statusEl.textContent += "\n✅ Firestore 읽기 성공: " + JSON.stringify(doc.data());
      })
      .catch(err => {
        statusEl.textContent = "❌ 에러 발생: " + err.code + " / " + err.message;
      });
  </script>
</body>
</html>
