<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ (ìˆ˜ì •ë¨)</title>
    <style>body{font-family:sans-serif;background:#222;color:#eee;padding:20px}pre{background:#111;padding:10px;border-radius:5px;white-space:pre-wrap;}</style>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <h1>Firebase ì—°ê²° í…ŒìŠ¤íŠ¸</h1>
    <pre id="status">ì§„í–‰ ì¤‘...</pre>

    <script>
        const statusEl = document.getElementById('status');
        const log = (msg) => { statusEl.textContent += "\n" + msg; };

        // ì˜¬ë°”ë¥¸ API í‚¤ë¡œ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.
        const firebaseConfig = {
            apiKey: "AIzaSyDz6xGJNXKinG5rREjdPz7toIYGZXziIU", // ì´ ê°’ì„ Firebase ì½˜ì†”ì—ì„œ í™•ì¸í•˜ì—¬ ìˆ˜ì •í•˜ì„¸ìš”
            authDomain: "sarangbangmusicplaylist.firebaseapp.com",
            projectId: "sarangbangmusicplaylist",
            storageBucket: "sarangbangmusicplaylist.appspot.com",
            messagingSenderId: "193412502606",
            appId: "1:193412502606:web:0f7f9ddbef1ee6711d1ff",
            measurementId: "G-L14GH3BHYD"
        };

        async function runTests() {
            log("ğŸš€ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...");
            
            try {
                firebase.initializeApp(firebaseConfig);
                log("âœ… Firebase ì´ˆê¸°í™” ì„±ê³µ");
            } catch (err) {
                log(`âŒ ì´ˆê¸°í™” ì‹¤íŒ¨: ${err.code} / ${err.message}`);
                return;
            }

            try {
                await firebase.auth().signInAnonymously();
                log("âœ… ìµëª… ë¡œê·¸ì¸ ì„±ê³µ");
            } catch (err) {
                log(`âŒ ìµëª… ë¡œê·¸ì¸ ì‹¤íŒ¨: ${err.code} / ${err.message}`);
                // 'auth/operation-not-allowed' ì˜¤ë¥˜ëŠ” ìµëª… ë¡œê·¸ì¸ì´ ë¹„í™œì„±í™”ë˜ì—ˆìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
                if (err.code === 'auth/operation-not-allowed') {
                    log("  ğŸ‘‰ í•´ê²° ë°©ë²•: Firebase ì½˜ì†” > Authentication íƒ­ì—ì„œ ìµëª… ë¡œê·¸ì¸ì„ í™œì„±í™”í•´ì£¼ì„¸ìš”.");
                }
                return;
            }

            try {
                const db = firebase.firestore();
                const testRef = db.collection("test").doc("ping");
                await testRef.set({ time: new Date() });
                log("âœ… Firestore ì“°ê¸° ì„±ê³µ");

                const doc = await testRef.get();
                log("âœ… Firestore ì½ê¸° ì„±ê³µ");
                log(`  ğŸ‘‰ ë°ì´í„°: ${JSON.stringify(doc.data())}`);
            } catch (err) {
                log(`âŒ Firestore ì‘ì—… ì‹¤íŒ¨: ${err.code} / ${err.message}`);
                // 'permission-denied' ì˜¤ë¥˜ëŠ” ë³´ì•ˆ ê·œì¹™ ì„¤ì •ì´ í•„ìš”í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
                if (err.code === 'permission-denied') {
                    log("  ğŸ‘‰ í•´ê²° ë°©ë²•: Firebase ì½˜ì†” > Firestore Database > Rules íƒ­ì—ì„œ ë³´ì•ˆ ê·œì¹™ì„ ì„¤ì •í•´ì£¼ì„¸ìš”.");
                }
            }
        }
        
        runTests();
    </script>
</body>
</html>
